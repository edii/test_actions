name: Main workflow

on: push

jobs:
  main:
    if: "!contains(github.event.head_commit.message, 'ci-skip') && contains(github.event.head_commit.message, 'deploy') && github.ref != 'refs/heads/master' || github.ref == 'refs/heads/master'"
    name: "test commit deploy or ci skip"
    runs-on: "ubuntu-latest"
    steps:
      - name: "Checkout source code"
        uses: "actions/checkout@v1"
        with:
          ref: ${{ github.ref }}
      - name: "echo message"
        run: |
          BRANCH_NAME=$(echo ${GITHUB_REF#refs/heads/} | sed 's/\//_/g')
          #BRANCH_NAME=${GITHUB_REF#refs/heads/}
          echo "Ok RUN! [${BRANCH_NAME}]"